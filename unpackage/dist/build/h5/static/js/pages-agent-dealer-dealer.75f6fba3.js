(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-agent-dealer-dealer"],{"1abd":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".umar-r[data-v-10f2884f]{margin-right:%?20?%}.dealer-main[data-v-10f2884f]{margin-bottom:%?130?%}.detail-tr[data-v-10f2884f]:first-child{background-color:#eee}.detail-table[data-v-10f2884f]{border-left:1px solid #ddd}.detail-td[data-v-10f2884f]{-webkit-box-flex:inherit;-webkit-flex:inherit;flex:inherit;width:33.3333%;font-size:%?24?%}.order-uinn1[data-v-10f2884f]{padding:%?8?% %?20?%}.am-bg-active[data-v-10f2884f]{background-color:#dcdada}.dealer-name[data-v-10f2884f]{padding:%?20?% 0 %?10?% 0;-webkit-border-top-right-radius:%?10?%;border-top-right-radius:%?10?%;-webkit-border-top-left-radius:%?10?%;border-top-left-radius:%?10?%}uni-canvas>uni-canvas[data-v-10f2884f]{display:none}",""]),t.exports=e},"3c81":function(t,e,i){"use strict";i.r(e);var a=i("8e82"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"40c8":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={uniPopup:i("ef48").default,uniIcons:i("9ca7").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"dealer-container"},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"login-dialog"},[i("v-uni-view",{staticClass:"login-dialog-cont"},[i("v-uni-view",{staticClass:"login-title"},[t._v("添加经销商"),i("v-uni-text",{staticClass:"iconfont login-dialog-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShow=!1}}},[t._v("")])],1),i("v-uni-view",{staticClass:"login-list"},[i("v-uni-text",{staticClass:"login-txt"},[t._v("名称")]),i("v-uni-input",{staticClass:"uni-input login-input",attrs:{placeholder:"请录入名称"},model:{value:t.dealerInfo.m_name,callback:function(e){t.$set(t.dealerInfo,"m_name",e)},expression:"dealerInfo.m_name"}})],1),i("v-uni-view",{staticClass:"login-list02"},[i("v-uni-view",{staticClass:"login-list02-content"},[i("v-uni-view",{staticClass:"login-list"},[i("v-uni-text",{staticClass:"login-txt",staticStyle:{width:"70%"}},[t._v("省份")]),i("v-uni-input",{staticClass:"uni-input login-input",attrs:{placeholder:"请录入省份"},model:{value:t.dealerInfo.m_prov,callback:function(e){t.$set(t.dealerInfo,"m_prov",e)},expression:"dealerInfo.m_prov"}})],1)],1),i("v-uni-view",{staticClass:"login-list02-content"},[i("v-uni-view",{staticClass:"login-list"},[i("v-uni-text",{staticClass:"login-txt",staticStyle:{width:"35%","text-align":"right"}},[t._v("区域")]),i("v-uni-input",{staticClass:"uni-input login-input",attrs:{placeholder:"请录入区域"},model:{value:t.dealerInfo.m_city,callback:function(e){t.$set(t.dealerInfo,"m_city",e)},expression:"dealerInfo.m_city"}})],1)],1)],1),i("v-uni-view",{staticClass:"login-list"},[i("v-uni-text",{staticClass:"login-txt"},[t._v("详细地址")]),i("v-uni-view",{staticClass:"login-area"},[i("v-uni-textarea",{staticClass:"login-area-txt",attrs:{placeholder:"请录入详细地址"},model:{value:t.dealerInfo.m_address,callback:function(e){t.$set(t.dealerInfo,"m_address",e)},expression:"dealerInfo.m_address"}})],1)],1),i("v-uni-view",{staticClass:"login-dialog-btncont"},[i("v-uni-button",{staticClass:"login-dialog-btn",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShow=!1}}},[t._v("取消")]),i("v-uni-button",{staticClass:"login-dialog-btn",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.dealerSub()}}},[t._v("确定")])],1)],1)],1),i("v-uni-view",[i("v-uni-view",{staticClass:"canvas",staticStyle:{width:"0",height:"0"}},[i("v-uni-canvas",{style:{width:t.qrcodeSize+"px",height:t.qrcodeSize+"px",opacity:"0"},attrs:{"canvas-id":"qrcode"}}),i("uni-popup",{ref:"showimage",attrs:{type:"center","mask-click":!0}},[i("v-uni-view",{staticClass:"uni-image"},[i("v-uni-view",{staticClass:"am-bg-white am-text-center dealer-name",style:{width:t.qrcodeSize+"px"}},[t._v(t._s(t.dealerName))]),i("v-uni-image",{staticClass:"image",attrs:{src:t.qrcodeSrc,mode:"scaleToFill"}}),i("v-uni-view",{staticClass:"uni-image-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelModal()}}},[i("uni-icons",{attrs:{type:"clear",color:"#fff",size:"30"}})],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"dealer-main f28"},t._l(t.dealerList,(function(e,a){return i("v-uni-view",{staticClass:"order-list-item ub-box-shadow"},[i("v-uni-view",{staticClass:"list-item ub ub-ac am-bg-active order-uinn1"},[i("v-uni-view",{staticClass:"ub ub-f1"},[t._v("公司名称："+t._s(e.m_name))]),i("v-uni-view",{staticClass:"ub"},[i("v-uni-switch",{staticClass:"am-switch-sm",attrs:{checked:0==e.m_state},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.switchAll(i,e)}}})],1)],1),i("v-uni-view",{staticClass:"order-uinn"},[i("v-uni-view",{staticClass:"list-item umar-b"},[i("v-uni-text",{staticClass:"am-text-99"},[t._v("收货地址：")]),t._v(t._s(e.m_prov+" "+e.m_city+" "+e.m_address))],1),i("v-uni-view",{staticStyle:{"margin-top":"8rpx"}},[i("v-uni-view",{staticClass:"detail-table"},[i("v-uni-view",{staticClass:"detail-tr no-ubb"},[i("v-uni-view",{staticClass:"detail-td"},[t._v("经销商名称")]),i("v-uni-view",{staticClass:"detail-td"},[t._v("电话")]),i("v-uni-view",{staticClass:"detail-td"},[t._v("启用/停用")])],1),t._l(e.item,(function(e){return i("v-uni-view",{staticClass:"detail-tr ub ub-ac"},[i("v-uni-view",{staticClass:"detail-td"},[t._v(t._s(e.c_nickname))]),i("v-uni-view",{staticClass:"detail-td",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tel(e.c_tel)}}},[i("a",{staticStyle:{"background-color":"rgb(48, 121, 243)","border-radius":"3rpx",padding:"0 5rpx",color:"#F1F1F1"}},[i("uni-icons",{attrs:{type:"phone",size:"16",color:"#FFFFFF"}}),t._v(t._s(e.c_tel))],1)]),i("v-uni-view",{staticClass:"detail-td",staticStyle:{margin:"0 auto"}},[i("v-uni-switch",{ref:"switchs",refInFor:!0,staticClass:"am-switch-sm",attrs:{id:e.c_id,checked:"0"==e.c_state,disabled:t.isSwitchAll},on:{change:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.switchChange(i,e)}}})],1)],1)}))],2)],1),i("v-uni-view",{staticClass:"ub am-btn-panel ub-ac"},[i("v-uni-view",{staticClass:"ub ub-f1 ub-pe"},[i("v-uni-view",{staticClass:"ub umar-r"},[i("v-uni-button",{staticClass:"f24 am-btn-danger",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.qrCode(e.m_ma001,e.m_id,e.m_name)}}},[t._v("生成二维码")])],1),i("v-uni-view",{staticClass:"ub umar-r"},[i("v-uni-button",{staticClass:"f24 am-btn-warning",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toEdit(e,a)}}},[t._v("修改")])],1),i("v-uni-view",{staticClass:"ub"},[i("v-uni-button",{staticClass:"f24 am-btn-primary",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toAllot(e)}}},[t._v("调拨")])],1)],1)],1)],1)],1)})),1),i("v-uni-button",{staticClass:"am-btn-fixed",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAdd()}}},[t._v("+添加")])],1)},s=[]},"7ffd":function(t,e,i){"use strict";i.r(e);var a=i("40c8"),n=i("3c81");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("9eef");var o,c=i("f0c5"),l=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"10f2884f",null,!1,a["a"],o);e["default"]=l.exports},"8e82":function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("4160"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("ade3")),s=a(i("3c17")),o=a(i("ef48")),c=a(i("9ca7")),l={components:{uniPopup:o.default,uniIcons:c.default},data:function(){return{userInfo:{},dealerList:[],isShow:!1,curType:"",curIndex:0,dealerInfo:{c_ma001:"",c_ma02:"",m_prov:"",m_city:"",m_name:"",m_address:"",m_type:"",m_type_note:"二级代理商"},qrcodeText:"",qrcodeSize:200,qrcodeSrc:"",isConfirm:!1,isSwitchAll:!1,dealerName:"",nameArr:["","","经销商","镗缸厂","易损件","微车批发","车型件"]}},onLoad:function(t){this.dealerInfo.m_type=t.m_type,uni.setNavigationBarTitle({title:this.nameArr[t.m_type]}),this.init()},methods:{tel:function(t){uni.makePhoneCall({phoneNumber:t})},init:function(){var t=this;uni.getStorage({key:"userInfo",success:function(e){t.userInfo=e.data[0],t.$check.isEmpty(t.userInfo.c_ma001)||(t.dealerInfo.c_ma001=t.userInfo.c_ma001),t.$check.isEmpty(t.userInfo.c_ma002)||(t.dealerInfo.c_ma002=t.userInfo.c_ma002),t.getDealer()}})},qrCode:function(t,e,i){var a=this;a.dealerName=i,a.qrcodeText="http://gao.vocen.cn:8044/#/pages/QRCode?ma001="+t+"&type="+a.dealerInfo.m_type+"&m_id="+e,uni.showLoading({title:"二维码生成中",mask:!0}),s.default.make({canvasId:"qrcode",text:a.qrcodeText,size:a.qrcodeSize,margin:10,success:function(t){a.qrcodeSrc=t,a.$nextTick((function(){a.$refs["showimage"].open()}))},complete:function(){uni.hideLoading()}})},cancelModal:function(){this.$refs["showimage"].close()},getDealer:function(){var e=this;e.$http.httpTokenRequest({url:e.$api.GetMarket+"?ma001="+e.userInfo.c_ma001+"&m_type="+e.dealerInfo.m_type,method:"GET",data:{}}).then((function(i){uni.hideLoading(),t.log(i.data),e.dealerList=i.data}),(function(e){t.log(e)}))},switchAll:function(e,i){var a=this,n=e.detail.value?"0":"-1";a.$http.httpTokenRequest({url:a.$api.CloseMarket,method:"POST",data:{m_id:i.m_id,m_state:n}}).then((function(e){t.log(e.data),e.data.State&&("0"==n?uni.showToast({icon:"none",title:"已启用",duration:1500}):"-1"==n&&uni.showToast({icon:"none",title:"已停用",duration:1500}),a.isSwitchAll=!a.isSwitchAll,a.init())}),(function(e){t.log(e)}))},switchChange:function(t,e){var i=this,a=t.target.value,n="";n=a?"是否启用":"是否停用",uni.showModal({title:"温馨提示",content:n,success:function(t){t.confirm?(a?i.passOption(e,"0"):i.passOption(e,"-1"),i.swicthResize(e.c_id,"yes")):t.cancel&&i.swicthResize(e.c_id,"no")}})},swicthResize:function(t,e){var i=uni.createSelectorQuery().in(this)._component.$refs.switchs;i.forEach((function(i){i.id==t&&(i.switchChecked,"no"==e&&(i.switchChecked=!i.switchChecked))}))},passOption:function(e,i){var a,s=this;s.$http.httpTokenRequest({url:s.$api.UserState+"?c_id="+e.c_id,method:"POST",data:(a={c_nickname:e.c_nickname,c_prov:e.c_prov,c_city:e.c_city,c_address:e.c_address,c_tel:e.c_tel},(0,n.default)(a,"c_tel",""),(0,n.default)(a,"c_state",i),a)}).then((function(t){t.data.State&&("0"==i?uni.showToast({icon:"none",title:"已启用",duration:1500}):"-1"==i&&uni.showToast({icon:"none",title:"已停用",duration:1500}))}),(function(e){t.log(e)}))},toAdd:function(){var t=this;t.dealerInfo.m_prov="",t.dealerInfo.m_city="",t.dealerInfo.m_name="",t.dealerInfo.m_address="",t.isShow=!0,t.curType="add"},toEdit:function(t,e){var i=this;i.dealerInfo.m_prov=t.m_prov,i.dealerInfo.m_city=t.m_city,i.dealerInfo.m_name=t.m_name,i.dealerInfo.m_address=t.m_address,i.curIndex=e,i.isShow=!0,i.curType="edit"},dealerSub:function(){var t=this;return t.$check.isEmpty(t.dealerInfo.m_prov)?(uni.showToast({icon:"none",title:"省份不能为空",duration:1500}),!1):t.$check.isEmpty(t.dealerInfo.m_city)?(uni.showToast({icon:"none",title:"区域不能为空",duration:1500}),!1):t.$check.isEmpty(t.dealerInfo.m_name)?(uni.showToast({icon:"none",title:"名称不能为空",duration:1500}),!1):t.$check.isEmpty(t.dealerInfo.m_address)?(uni.showToast({icon:"none",title:"详细地址不能为空",duration:1500}),!1):void("add"==t.curType?t.dealerAdd():"edit"==t.curType&&t.dealerEdit())},dealerAdd:function(){var e=this;e.$http.httpTokenRequest({url:e.$api.AddMarket,method:"POST",data:e.dealerInfo}).then((function(t){uni.hideLoading(),t.data.State&&(uni.showToast({icon:"none",title:"添加成功",duration:1500}),e.isShow=!1,e.getDealer())}),(function(e){t.log(e)}))},dealerEdit:function(){var e=this;e.$http.httpTokenRequest({url:e.$api.AddMarket+"?m_id="+e.dealerList[e.curIndex].m_id,method:"POST",data:{m_prov:e.dealerInfo.m_prov,m_city:e.dealerInfo.m_city,m_address:e.dealerInfo.m_address,m_name:e.dealerInfo.m_name}}).then((function(t){uni.hideLoading(),t.data.State&&(uni.showToast({icon:"none",title:"修改成功",duration:1500}),e.dealerList[e.curIndex].m_name=e.dealerInfo.m_name,e.dealerList[e.curIndex].m_prov=e.dealerInfo.m_prov,e.dealerList[e.curIndex].m_city=e.dealerInfo.m_city,e.dealerList[e.curIndex].m_address=e.dealerInfo.m_address,e.isShow=!1,e.getDealer())}),(function(e){t.log(e)}))},toAllot:function(t){uni.navigateTo({url:"../allot/allot?m_id="+t.m_id+"&m_name="+t.m_name+"&m_address="+t.m_prov+t.m_city+t.m_address})}}};e.default=l}).call(this,i("5a52")["default"])},"9eef":function(t,e,i){"use strict";var a=i("d2c5"),n=i.n(a);n.a},d2c5:function(t,e,i){var a=i("1abd");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("29bb12e9",a,!0,{sourceMap:!1,shadowMode:!1})}}]);