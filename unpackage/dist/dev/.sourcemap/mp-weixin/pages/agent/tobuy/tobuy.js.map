{"version":3,"sources":["uni-app:///main.js","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/tobuy/tobuy.vue?d4b9","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/tobuy/tobuy.vue?6fd6","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/tobuy/tobuy.vue?1df3","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/tobuy/tobuy.vue?b5b9","uni-app:///pages/agent/tobuy/tobuy.vue","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/tobuy/tobuy.vue?1049","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/tobuy/tobuy.vue?340e"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,mG;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACqC;;;AAGzF;AACiL;AACjL,gBAAgB,mLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAA2pB,CAAgB,6oBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+I/qB;AACA;AACA,4BADA,EADA;;AAIA,MAJA,kBAIA;AACA;AACA,mBADA;AAEA,iBAFA,EAEA;AACA,kBAHA,EAGA;AACA,kBAJA;AAKA,eALA,EAKA;AACA,cANA,EAMA;AACA,mBAPA,EAOA;AACA,mBARA,EAQA;AACA,iBATA,EASA;AACA;AACA;AACA,kCADA;AAEA,kEAFA;AAGA,0EAHA;AAIA,kBAJA;AAKA,iBALA,EADA;AAOA;AACA,wCADA;AAEA,kEAFA;AAGA,0EAHA;AAIA,oBAJA;AAKA,iBALA,EAPA;AAaA;AACA,gCADA;AAEA,kEAFA;AAGA,0EAHA;AAIA,kBAJA;AAKA,iBALA,EAbA,CAVA;;;AA+BA,eA/BA;AAgCA,wBAhCA;AAiCA,gBAjCA,EAiCA;AACA,kBAlCA,EAkCA;AACA,iBAnCA,EAmCA;AACA,iBApCA,EAoCA;AACA,mBArCA;AAsCA,oBAtCA;AAuCA,qBAvCA;AAwCA,oBAxCA;;AA0CA,GA/CA;AAgDA,QAhDA,kBAgDA,MAhDA,EAgDA;AACA;;AAEA;AACA,qBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCADA;AAEA,sEAFA;AAGA,8EAHA;AAIA,sBAJA;AAKA,qBALA;;AAOA;AACA;AACA,2BAhBA,CAgBA;AACA,OAnBA;;;AAsBA,GAzEA;AA0EA;AACA;AACA,cAFA,wBAEA;AACA;AACA;AACA;AACA;AACA,uFADA;AAEA,qBAFA;AAGA,gBAHA;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SATA,MASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAvBA,CAuBA;AACA;AACA,+BAzBA,CAyBA;AACA,OA9BA,EA8BA;AACA;AACA,OAhCA;AAiCA,KAvCA;;AAyCA;AACA,YA1CA,oBA0CA,IA1CA,EA0CA;AACA;AACA;AACA,oEADA;;AAGA,KA/CA;;AAiDA;AACA,cAlDA,wBAkDA;AACA;AACA;AACA,iFADA;AAEA,qBAFA;AAGA,gBAHA;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BArBA,CAqBA;AACA,OA1BA,EA0BA;AACA;AACA,OA5BA;AA6BA,KAjFA;;AAmFA;AACA,eApFA,yBAoFA;AACA;AACA;AACA,oHADA;AAEA,qBAFA;AAGA,gBAHA;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAFA,MAEA;AACA;AACA;AACA;AACA,6CADA;AAEA,sCAFA;AAGA,8CAHA;AAIA,4CAJA;AAKA,mDALA;AAMA,qDANA;AAOA,sCAPA;AAQA,4EARA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA,SAzBA,MAyBA;AACA;AACA;AACA;AACA;AACA;AACA,iBAFA,MAEA;AACA;AACA;AACA;AACA,8CADA;AAEA,sCAFA;AAGA,+CAHA;AAIA,6CAJA;AAKA,uDALA;AAMA,yDANA;AAOA,sCAPA;AAQA,8EARA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OA9DA,EA8DA;AACA;AACA,OAhEA;AAiEA,KAvJA;;AAyJA;AACA,kBA1JA,4BA0JA;AACA;AACA;AACA,gMADA;AAEA,qBAFA;AAGA,gBAHA;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAxBA,EAwBA;AACA;AACA,OA1BA;AA2BA,KAvLA;;AAyLA;AACA,cA1LA,sBA0LA,CA1LA,EA0LA,KA1LA,EA0LA,IA1LA,EA0LA,IA1LA,EA0LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCADA;AAEA,wBAFA;AAGA;AACA,uCADA;AAEA,6CAFA;AAGA,6CAHA;AAIA,iCAJA;AAKA,oBALA;AAMA,+BANA,EAHA;;AAWA,YAXA,CAWA;AACA;AACA;AACA;AACA,SAfA,EAeA;AACA;AACA,SAjBA;AAkBA;AACA,KA9NA;AA+NA;AACA,iBAhOA,2BAgOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,WALA,MAKA;AACA;AACA;AACA;AACA;AACA,KAjPA;;AAmPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAvQA,qBAuQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,qBA3CA;AA4CA,oBA5CA,eACA,gDACA,sBACA,0CADA,EAEA,0CAFA,EAGA,wCAHA,EAIA,+BAJA,IAMA,CARA,CAUA;AACA,0BACA,iCADA,EAEA,4BAFA,EAGA,wCAHA,EAIA,+BAJA,EAKA,gDALA,EAMA,kCANA,GAQA,gBAnBA,CAoBA;AACA,qCACA,+BACA,eACA,oBADA,EAEA,QAFA,GAIA,gBACA,mBADA,EAEA,aAFA,EAGA,WAHA,EAIA,eAJA,EAKA,mBALA,GAOA,0BACA,yBACA,CAdA,EAtBA,CAsCA;;;;qRAKA,YA3CA,CA4CA,WA5CA,CA6CA,sCACA,uBACA,iBACA,uBACA,CAHA,MAGA,CACA;AACA;AACA;AACA;AACA,qBAJA;AAKA;AACA,iBAXA;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApEA,mBAqEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,sBADA;AAEA,wBAFA;AAGA,wBAHA;;AAKA;;AAEA,KApWA;AAqWA;AACA,WAtWA,mBAsWA,IAtWA,EAsWA,IAtWA,EAsWA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAhXA;;AAkXA;AACA,cAnXA,wBAmXA;AACA;AACA;AACA;AACA,gCADA;AAEA,sBAFA;AAGA;AACA,qCADA;AAEA,6CAFA;AAGA,iDAHA;AAIA,2CAJA;AAKA,2CALA;AAMA,uCANA;AAOA,+CAPA;AAQA,4BARA;AASA,2CATA;AAUA,gCAVA;AAWA,uCAXA,EAHA;;AAgBA,UAhBA,CAgBA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA,0BAFA;;AAIA;AACA;AACA,uCADA;;AAGA,WAJA,EAIA,IAJA;AAKA;AACA,OA9BA,EA8BA;AACA;AACA,OAhCA;AAiCA;AACA,KAxZA;AAyZA;AACA,YA1ZA,sBA0ZA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,KAnaA;AAoaA;AACA,UAraA,kBAqaA,IAraA,EAqaA;AACA;AACA;AACA;AACA,8BADA;AAEA,sBAFA;AAGA;AACA,mCADA;AAEA,2BAFA;AAGA,yBAHA;AAIA,2BAJA,EAHA;;AASA,UATA,CASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAlBA,EAkBA;AACA;AACA,OApBA;AAqBA,KA7bA,EA1EA,E;;;;;;;;;;;;;AC/IA;AAAA;AAAA;AAAA;AAA69B,CAAgB,s6BAAG,EAAC,C;;;;;;;;;;;ACAj/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/agent/tobuy/tobuy.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/agent/tobuy/tobuy.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./tobuy.vue?vue&type=template&id=4120c9b2&scoped=true&\"\nvar renderjs\nimport script from \"./tobuy.vue?vue&type=script&lang=js&\"\nexport * from \"./tobuy.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tobuy.vue?vue&type=style&index=0&id=4120c9b2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4120c9b2\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/HBuilderProjects/MotorOrder/pages/agent/tobuy/tobuy.vue\"\nexport default component.exports","export * from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./tobuy.vue?vue&type=template&id=4120c9b2&scoped=true&\"","var render = function () {}\nvar staticRenderFns = []\nvar recyclableRender\nvar components\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./tobuy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./tobuy.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"tobuy-container\">\r\n\t\t<!--备注弹层-->\r\n\t\t<view class=\"login-dialog\" v-if=\"isShow\">\r\n\t\t\t<view class=\"login-dialog-cont\">\r\n\t\t\t\t<view class=\"login-title\">备注信息</view>\r\n\t\t\t\t<view class=\"login-list\">\r\n\t\t\t\t\t<textarea class=\"f32\" v-model=\"note\" placeholder=\"请填写您的备注信息\" placeholder-style=\"color:#999\" style=\"height: 80px;\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 订单预览 -->\r\n\t\t\t\t<scroll-view scroll-y=\"true\" class=\"scroll-Y\" show-scrollbar=\"true\">\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<view v-for=\"cangku in priview\" style=\"margin-bottom: 20rpx;\">\r\n\t\t\t\t\t\t\t<text class=\"stock-name\" v-if=\"cangku.name == '预定提醒'\" style=\"background-color: #ff7f50;\">缺货产生的预订单</text>\r\n\t\t\t\t\t\t\t<text class=\"stock-name\" v-else style=\"background-color: #6dacf0;\">{{cangku.name}}进货单</text>\r\n\t\t\t\t\t\t\t<view class=\"detail-table\">\r\n\t\t\t\t\t\t\t\t<view class=\"detail-tr no-ubb\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width:25%\">产品编号</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width:40%\">名称</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width:15%\">数量</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width:20%\">单价</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"detail-tr ub-ac\" v-for=\"data in cangku.list\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width:25%\">{{data.erpcode}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width:40%\">{{data.name}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width:15%\">{{data.qty}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width:20%\">{{data.price}}</view>\r\n\t\t\t\t\t\t\t\t</view> \r\n\t\t\t\t\t\t\t\t<view class=\"detail-tr\" style=\"background-color: #EEEEEE;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width: 50%;\">合计：<text class=\"am-blod\">{{cangku.nums}}</text></view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"detail-td\" style=\"width: 50%;\">总价：<text class=\"am-blod\">{{cangku.money}}</text></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<!-- 订单预览 -->\r\n\t\t\t\t<view class=\"ub book-btn-group\">\r\n\t\t\t\t\t<button type=\"default\" class=\"login-dialog-btn ub ub-ac ub-pc\" @click=\"isShow = false\">取消</button>\r\n\t\t\t\t\t<button type=\"primary\" class=\"login-dialog-btn ub ub-ac ub-pc\" @click=\"confirmSub()\">提交</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!--备注弹层-->\r\n\t\t<view class=\"custpro-main search-cont\">\r\n\t\t\t<!-- 系统升级内容开始 -->\r\n\t\t\t<!-- <view class=\"tobuy_upgrade\"></view> -->\r\n\t\t\t<!-- 系统升级内容结束 -->\r\n\t\t\t\r\n\t\t\t<!-- 搜索内容开始 -->\r\n\t\t\t<view class=\"index-search\">\r\n\t\t\t\t<view class=\"index-search-cont\">\r\n\t\t\t\t\t<view class=\"search-input-box\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t<input class=\"index-search-txt\" confirm-type=\"search\" v-model=\"keyTxt\" placeholder=\"请输入\"  @confirm=\"toSearch\"  />\r\n\t\t\t\t\t\t<button class=\"index-search-btn s-btn\" @click=\"toSearch()\">搜索</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 搜索内容结束 -->\r\n\t\t\t\r\n\t\t\t<!-- 产品列表 -->\r\n\t\t\t<view class=\"custpro-list\" v-for=\"(item,index) in proList\" v-if=\"!isSearch\">\r\n\t\t\t\t<view class=\"goods-info\" @click=\"toDetail(item)\">\r\n\t\t\t\t\t<block v-if=\"erpcode == ''\">\r\n\t\t\t\t\t\t<image :src=\"$http.imgUrl + item.titlepicurl\" mode=\"widthFix\" class=\"custpro-img\"></image>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<view class=\"custpro-fr\">\r\n\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t<text class=\"custpro-title\">{{item.title}}</text>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t售价:<text class=\"am-text-danger\">￥</text><text class=\"index-price\">{{item.currentprice}}</text>进价:{{item.inprice}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>我的库存:{{item.storemin}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stock-info\">\r\n\t\t\t\t\t<view class=\"stock-item\">\r\n\t\t\t\t\t\t<view class=\"custpro-cont\" v-for=\"(stock, index) in item.stockList\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"custpro-item\">{{stock.name}}库存:{{stock.storage}}</view>\r\n\t\t\t\t\t\t\t<view class=\"custpro-cart\" v-if=\"stock.storage > 0\">\r\n\t\t\t\t\t\t\t\t<uni-number-box :min=\"0\" :max=\"stock.storage\" :value=\"stock.s_qty\" @change=\"changeCart($event,index,stock,item)\" :height=\"24\" :width=\"90\"></uni-number-box>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"custpro-cart\" v-else>\r\n\t\t\t\t\t\t\t\t<uni-number-box :min=\"0\" :value=\"stock.s_qty\" @change=\"changeCart($event,index,stock,item)\" :height=\"24\" :width=\"90\"></uni-number-box>\r\n\t\t\t\t\t\t\t\t<view class=\"booking-btn\"><button type=\"warn\" size=\"mini\" @click=\"remind(stock)\">预订提醒</button></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 产品列表 -->\r\n\t\t\t<view class=\"custpro-list aa\" v-for=\"(item01,index02) in searchList\" v-if=\"isSearch\">\r\n\t\t\t\t<view class=\"goods-info\" @click=\"toDetail(item01)\">\r\n\t\t\t\t\t<block v-if=\"erpcode == ''\">\r\n\t\t\t\t\t\t<image :src=\"$http.imgUrl + item01.titlepicurl\" mode=\"widthFix\" class=\"custpro-img\"></image>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<view class=\"custpro-fr\">\r\n\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t<text class=\"custpro-title\">{{item01.title}}</text>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t售价:<text class=\"am-text-danger\">￥</text><text class=\"index-price\">{{item01.currentprice}}</text>进价:{{item01.inprice}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>我的库存:{{item01.storemin}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stock-info\">\r\n\t\t\t\t\t<view class=\"stock-item\">\r\n\t\t\t\t\t\t<view class=\"custpro-cont\" v-for=\"(stock, index03) in item01.stockList\" :key=\"index03\">\r\n\t\t\t\t\t\t\t<view class=\"custpro-item\">{{stock.name}}库存:{{stock.storage}}</view>\r\n\t\t\t\t\t\t\t<view class=\"custpro-cart\" v-if=\"stock.storage > 0\">\r\n\t\t\t\t\t\t\t\t<uni-number-box :min=\"0\" :max=\"stock.storage\" :value=\"stock.s_qty\" @change=\"changeCart($event,index03,stock,item01)\" :height=\"24\" :width=\"90\"></uni-number-box>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"custpro-cart\" v-else>\r\n\t\t\t\t\t\t\t\t<uni-number-box :min=\"0\" :value=\"stock.s_qty\" @change=\"changeCart($event,index03,stock,item01)\" :height=\"24\" :width=\"90\"></uni-number-box>\r\n\t\t\t\t\t\t\t\t<view class=\"booking-btn\"><button type=\"warn\" size=\"mini\" @click=\"remind(stock)\">预订提醒</button></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<view class=\"cart-bottom custpro-bottom\">\r\n\t\t\t<view class=\"cart-bottom-cont\"> \r\n\t\t\t\t<view class=\"cart-bot-left\">\r\n\t\t\t\t\t<view>总价格：<text class=\"cart-price\">￥{{totalPrice}}</text></view>\r\n\t\t\t\t\t<view>总数量：<text class=\"cart-price\">{{totalNum}}</text></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button type=\"default\" @click=\"toSumit()\" class=\"cart-bot-right\">提交订单</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 底部导航 -->\r\n\t\t<tabBar :current=\"currentTabIndex\" :column=\"tabNum\" :options=\"tabList\"></tabBar>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport uniLoadMore from '@/components/uni-load-more/uni-load-more.vue'\r\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tuniLoadMore,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tduration: 500,\r\n\t\t\t\tproList:[],//产品列表\r\n\t\t\t\tuserInfo:{},//用户信息\r\n\t\t\t\tcustInfo:{},\r\n\t\t\t\tenter:'',//判断是推荐还是下单\r\n\t\t\t\tnote:'',//代下单备注\r\n\t\t\t\tisShow:false,//代下单弹层\r\n\t\t\t\ttotalPrice:0,//总价格\r\n\t\t\t\ttotalNum:0,//总数量\r\n\t\t\t\ttabList: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpagePath : '../index/index',\r\n\t\t\t\t\t\ticonPath:\"../../../static/images/icon_index_bottom01.png\",\r\n\t\t\t\t\t\tselectedIconPath:\"../../../static/images/icon_index_bottom11.png\",\r\n\t\t\t\t\t\ttext : '首页',\r\n\t\t\t\t\t\tbadge : ''\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\tpagePath : '../customer/customer',\r\n\t\t\t\t\t\ticonPath:\"../../../static/images/icon_index_bottom05.png\",\r\n\t\t\t\t\t\tselectedIconPath:\"../../../static/images/icon_index_bottom15.png\",\r\n\t\t\t\t\t\ttext : '代客下单',\r\n\t\t\t\t\t\tbadge : ''\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\tpagePath : '../user/user',\r\n\t\t\t\t\t\ticonPath:\"../../../static/images/icon_index_bottom04.png\",\r\n\t\t\t\t\t\tselectedIconPath:\"../../../static/images/icon_index_bottom14.png\",\r\n\t\t\t\t\t\ttext : '我的',\r\n\t\t\t\t\t\tbadge : ''\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\ttabNum:3,\r\n\t\t\t\tcurrentTabIndex:1,\r\n\t\t\t\tkeyTxt:'',//关键字\r\n\t\t\t\tcartItem:[],//选择商品\r\n\t\t\t\tpriview : [], //订单预览\r\n\t\t\t\terpcode : \"\", //产品编号\r\n\t\t\t\tisload : false,\r\n\t\t\t\tsearchList:[],\r\n\t\t\t\tisSearch:false,\r\n\t\t\t\tisClick:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tlet this_ = this;\r\n\t\t\t\r\n\t\t\tuni.getStorage({\r\n\t\t\t    key: 'userInfo',\r\n\t\t\t    success: function (res) {\r\n\t\t\t\t\tthis_.userInfo = res.data[0];\r\n\t\t\t\t\tif(Object.getOwnPropertyNames(option).length != 0){\r\n\t\t\t\t\t\tthis_.erpcode = option.code;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(this_.erpcode);\r\n\t\t\t\t\tif(this_.userInfo.c_level == 1 && this_.userInfo.c_admin == 1){\r\n\t\t\t\t\t\tthis_.tabList.splice(1,0,{\r\n\t\t\t\t\t\t\tpagePath : '../tobuy/tobuy',\r\n\t\t\t\t\t\t\ticonPath:\"../../../static/images/icon_index_bottom06.png\",\r\n\t\t\t\t\t\t\tselectedIconPath:\"../../../static/images/icon_index_bottom16.png\",\r\n\t\t\t\t\t\t\ttext : '进货',\r\n\t\t\t\t\t\t\tbadge : ''\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis_.tabNum = 4;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis_.getProduct();//产品列表\r\n\t\t\t    }\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//产品列表\r\n\t\t\tgetProduct(){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\t//获取产品列表\r\n\t\t\t\tuni.showLoading();\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl:this_.$api.ProductHome+'?tag=' + this_.keyTxt + '&code='+ this_.erpcode,\r\n\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\tdata:{},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tif(!this_.isSearch){\r\n\t\t\t\t\t\tthis_.proList = res.data.rows;\r\n\t\t\t\t\t\tfor(let i=0;i<res.data.rows.length;i++){\r\n\t\t\t\t\t\t\tthis_.$set(this_.proList[i], 'inprice', 0);\r\n\t\t\t\t\t\t\tthis_.$set(this_.proList[i], 'zstorage', 0);\r\n\t\t\t\t\t\t\tthis_.$set(this_.proList[i], 'stockList', []);\r\n\t\t\t\t\t\t\tthis_.$set(this_.proList[i], 'companyName', '');\r\n\t\t\t\t\t\t\tthis_.$set(this_.proList[i], 'storemin', 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis_.searchList = res.data.rows;\r\n\t\t\t\t\t\tfor(let i=0;i<res.data.rows.length;i++){\r\n\t\t\t\t\t\t\tthis_.$set(this_.searchList[i], 'inprice', 0);\r\n\t\t\t\t\t\t\tthis_.$set(this_.searchList[i], 'zstorage', 0);\r\n\t\t\t\t\t\t\tthis_.$set(this_.searchList[i], 'stockList', []);\r\n\t\t\t\t\t\t\tthis_.$set(this_.searchList[i], 'companyName', '');\r\n\t\t\t\t\t\t\tthis_.$set(this_.searchList[i], 'storemin', 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis_.getInPrice();//进价\r\n\t\t\t\t\t//this_.getStoreQty();//库存\r\n\t\t\t\t\tthis_.getStoreMinQty();//自己库存\r\n\t\t\t\t},error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//进详情\r\n\t\t\ttoDetail(item){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t \turl: '../detail/detail?code='+item.erpcode + '&type=tobuy'\r\n\t\t\t\t}); \r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//获取进货价\r\n\t\t\tgetInPrice(){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl:this_.$api.InPrice+'?c_ma001=' + this_.userInfo.c_ma001 + '&code=',\r\n\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\tdata:{},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif(!this_.isSearch){\r\n\t\t\t\t\t\tfor(let i=0;i<res.data.length;i++){\r\n\t\t\t\t\t\t\tfor(let j=0;j<this_.proList.length;j++){\r\n\t\t\t\t\t\t\t\tif(res.data[i].mb001 == this_.proList[j].erpcode){\r\n\t\t\t\t\t\t\t\t\tthis_.proList[j].inprice = res.data[i].price.toFixed(2);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tfor(let i=0;i<res.data.length;i++){\r\n\t\t\t\t\t\t\tfor(let j=0;j<this_.searchList.length;j++){\r\n\t\t\t\t\t\t\t\tif(res.data[i].mb001 == this_.searchList[j].erpcode){\r\n\t\t\t\t\t\t\t\t\tthis_.searchList[j].inprice = res.data[i].price.toFixed(2);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis_.getStoreQty();//库存\r\n\t\t\t\t},error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//获取库存\r\n\t\t\tgetStoreQty(){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl:this_.$api.StoreQty+'?c_id= ' + this_.userInfo.c_id + '&storage=' + this_.userInfo.storage + '&code=',\r\n\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\tdata:{},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\t// console.log(\"获取库存\");\r\n\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\tif(!this_.isSearch){\r\n\t\t\t\t\t\tfor(let z=0;z<this_.proList.length;z++){\r\n\t\t\t\t\t\t\tfor(let m=0;m<res.data.length;m++){\r\n\t\t\t\t\t\t\t\tif(res.data[m].mc001 == this_.proList[z].erpcode){\r\n\t\t\t\t\t\t\t\t\tif(res.data[m].mc007 == 0){\r\n\t\t\t\t\t\t\t\t\t\tvar storageName = \"预定提醒\";\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tvar storageName = res.data[m].storage;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\t\t\t\t\t'name' : res.data[m].storage,\r\n\t\t\t\t\t\t\t\t\t\t'bname' : storageName,\r\n\t\t\t\t\t\t\t\t\t\t'storage' : res.data[m].mc007,\r\n\t\t\t\t\t\t\t\t\t\t'mc002' : res.data[m].mc002,\r\n\t\t\t\t\t\t\t\t\t\t'mb001' :this_.proList[z].erpcode,\r\n\t\t\t\t\t\t\t\t\t\t'inprice':this_.proList[z].inprice,\r\n\t\t\t\t\t\t\t\t\t\t'type' : this_.keyTxt,\r\n\t\t\t\t\t\t\t\t\t\t's_qty' : res.data[m].s_qty == null ? 0 :　res.data[m].s_qty\r\n\t\t\t\t\t\t\t\t\t}; \r\n\t\t\t\t\t\t\t\t\tthis_.proList[z].stockList.push(obj);\r\n\t\t\t\t\t\t\t\t\tthis_.proList[z].zstorage = this_.proList[z].zstorage + res.data[m].mc007;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis_.getTotalPrice();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tfor(let z=0;z<this_.searchList.length;z++){\r\n\t\t\t\t\t\t\tfor(let m=0;m<res.data.length;m++){\r\n\t\t\t\t\t\t\t\tif(res.data[m].mc001 == this_.searchList[z].erpcode){\r\n\t\t\t\t\t\t\t\t\tif(res.data[m].mc007 == 0){\r\n\t\t\t\t\t\t\t\t\t\tvar storageName = \"预定提醒\";\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tvar storageName = res.data[m].storage;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\t\t\t\t\t'name' : res.data[m].storage,\r\n\t\t\t\t\t\t\t\t\t\t'bname' : storageName,\r\n\t\t\t\t\t\t\t\t\t\t'storage' : res.data[m].mc007,\r\n\t\t\t\t\t\t\t\t\t\t'mc002' : res.data[m].mc002,\r\n\t\t\t\t\t\t\t\t\t\t'mb001' :this_.searchList[z].erpcode,\r\n\t\t\t\t\t\t\t\t\t\t'inprice':this_.searchList[z].inprice,\r\n\t\t\t\t\t\t\t\t\t\t'type' : this_.keyTxt,\r\n\t\t\t\t\t\t\t\t\t\t's_qty' : res.data[m].s_qty == null ? 0 :　res.data[m].s_qty\r\n\t\t\t\t\t\t\t\t\t}; \r\n\t\t\t\t\t\t\t\t\tthis_.searchList[z].stockList.push(obj);\r\n\t\t\t\t\t\t\t\t\tthis_.searchList[z].zstorage = this_.searchList[z].zstorage + res.data[m].mc007;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis_.isClick = false;\r\n\t\t\t\t\t\tthis_.getTotalPrice();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis_.isload = true;\r\n\t\t\t\t},error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//获取自己库存\r\n\t\t\tgetStoreMinQty(){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl:this_.$api.CustStorage+'?c_id=' + this_.userInfo.c_id + '&ma002=' + this_.userInfo.c_ma002 + '&level=' + this_.userInfo.c_level + '&m_id=' + this_.userInfo.c_m_id + '&isonway=0',\r\n\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\tdata:{},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\tif(!this_.isSearch){\r\n\t\t\t\t\t\tfor(let l=0;l<this_.proList.length;l++){\r\n\t\t\t\t\t\t\tfor(let k=0;k<res.data.length;k++){\r\n\t\t\t\t\t\t\t\tif(res.data[k].erpcode == this_.proList[l].erpcode){\r\n\t\t\t\t\t\t\t\t\tthis_.proList[l].storemin = this_.proList[l].storemin + res.data[k].qty;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tfor(let l=0;l<this_.searchList.length;l++){\r\n\t\t\t\t\t\t\tfor(let k=0;k<res.data.length;k++){\r\n\t\t\t\t\t\t\t\tif(res.data[k].erpcode == this_.searchList[l].erpcode){\r\n\t\t\t\t\t\t\t\t\tthis_.searchList[l].storemin = this_.searchList[l].storemin + res.data[k].qty;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t},error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//加减购物车\r\n\t\t\tchangeCart(e,index,list,item){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tif(this_.isSearch){\r\n\t\t\t\t\tfor(let i=0;i<this_.proList.length;i++){\r\n\t\t\t\t\t\tif(item.erpcode == this_.proList[i].erpcode){\r\n\t\t\t\t\t\t\tlet storeArr = this_.proList[i].stockList;\r\n\t\t\t\t\t\t\tfor(let j=0;j<storeArr.length;j++){\r\n\t\t\t\t\t\t\t\tif(storeArr[j].mc002 == list.mc002){\r\n\t\t\t\t\t\t\t\t\tthis_.proList[i].stockList[j].s_qty = e;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(this_.isload){\r\n\t\t\t\t\tthis_.$set(list,'s_qty',e);\r\n\t\t\t\t\t//console.log(\"list\");\r\n\t\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\t\turl:this_.$api.CustShopCart,\r\n\t\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\"c_id\":this_.userInfo.c_id,\r\n\t\t\t\t\t\t\t\"c_ma001\":this_.userInfo.c_ma001,\r\n\t\t\t\t\t\t\t\"c_ma002\":this_.userInfo.c_ma002,\r\n\t\t\t\t\t\t\t\"i_mb001\" : list.mb001,\r\n\t\t\t\t\t\t\t\"qty\" : e,\r\n\t\t\t\t\t\t\t\"mc002\" : list.mc002\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t//请求成功\r\n\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\tthis_.getTotalPrice();\r\n\t\t\t\t\t},error => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//计算总价\r\n\t\t\tgetTotalPrice(){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.totalNum = 0;\r\n\t\t\t\tthis_.totalPrice = 0;\r\n\t\t\t\tfor(let i = 0; i < this_.proList.length; i++){\r\n\t\t\t\t\tlet stockList = this_.proList[i].stockList;\r\n\t\t\t\t\tfor(let m = 0; m < stockList.length; m++){\r\n\t\t\t\t\t\tif(stockList[m].storage > 0 && stockList[m].s_qty > 0){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis_.totalNum = parseInt(this_.totalNum) + parseInt(stockList[m].s_qty);\r\n\t\t\t\t\t\t\tthis_.totalPrice = this_.totalPrice + (stockList[m].s_qty * stockList[m].inprice);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else if(stockList[m].storage == 0 && stockList[m].s_qty > 0){\r\n\t\t\t\t\t\t\tthis_.remind(stockList[m]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// changeCart(e,index,list){\r\n\t\t\t// \tlet this_ = this;\r\n\t\t\t// \tthis_.$set(list[index],'s_qty',e);\r\n\t\t\t// \tthis_.totalNum = 0;\r\n\t\t\t// \tthis_.totalPrice = 0;\r\n\t\t\t// \tfor(let i=0;i<this_.proList.length;i++){\r\n\t\t\t// \t\tfor(let m = 0; m < this_.proList[i].stockList.length; m++){\r\n\t\t\t// \t\t\tif(!this_.$check.isEmpty(this_.proList[i].stockList[m].s_qty)){\r\n\t\t\t// \t\t\t\tif(this_.proList[i].stockList[m].storage > 0){\r\n\t\t\t// \t\t\t\t\tthis_.totalNum = parseInt(this_.totalNum) + parseInt(this_.proList[i].stockList[m].s_qty);\r\n\t\t\t// \t\t\t\t\tthis_.totalPrice = this_.totalPrice + (this_.proList[i].stockList[m].s_qty*this_.proList[i].inprice);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t// \t\t\t\t}else{\r\n\t\t\t// \t\t\t\t\tthis_.remind(this_.proList[i].stockList[m]);\r\n\t\t\t// \t\t\t\t}\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// },\r\n\t\t\t//提交订单\r\n\t\t\ttoSumit(){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.cartItem = [];\r\n\t\t\t\tlet oldData = [];\r\n\t\t\t\tconsole.log(this_.proList);\r\n\t\t\t\t\r\n\t\t\t\tfor(let i=0;i<this_.proList.length;i++){\r\n\t\t\t\t\tfor(let m = 0; m < this_.proList[i].stockList.length; m++){\r\n\t\t\t\t\t\tif(!this_.$check.isEmpty(this_.proList[i].stockList[m].s_qty)){\r\n\t\t\t\t\t\t\tif(this_.proList[i].stockList[m].s_qty != 0){\r\n\t\t\t\t\t\t\t\tif(this_.proList[i].stockList[m].storage > 0){\r\n\t\t\t\t\t\t\t\t\tthis_.cartItem.push({\r\n\t\t\t\t\t\t\t\t\t\tmc002:this_.proList[i].stockList[m].mc002,\r\n\t\t\t\t\t\t\t\t\t\tmb001:this_.proList[i].stockList[m].mb001,\r\n\t\t\t\t\t\t\t\t\t\tqty:this_.proList[i].stockList[m].s_qty, \r\n\t\t\t\t\t\t\t\t\t\tprice: this_.proList[i].inprice\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t//预览的订单信息\r\n\t\t\t\t\t\t\t\tlet a = {\r\n\t\t\t\t\t\t\t\t\terpcode : this_.proList[i].erpcode,\r\n\t\t\t\t\t\t\t\t\tname : this_.proList[i].title,\r\n\t\t\t\t\t\t\t\t\tqty : this_.proList[i].stockList[m].s_qty,\r\n\t\t\t\t\t\t\t\t\tprice : this_.proList[i].inprice,\r\n\t\t\t\t\t\t\t\t\tstorageName : this_.proList[i].stockList[m].bname,\r\n\t\t\t\t\t\t\t\t\tstorage : this_.proList[i].zstorage\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\toldData.push(a);\r\n\t\t\t\t\t\t\t\t// 把源数据先变成目标数据的规则\r\n\t\t\t\t\t\t\t\tlet oldDataRule = []\r\n\t\t\t\t\t\t\t\toldData.forEach(el => {\r\n\t\t\t\t\t\t\t\t\tlet oldObj = {\r\n\t\t\t\t\t\t\t\t\t\tname: el.storageName,\r\n\t\t\t\t\t\t\t\t\t\tlist:[]\r\n\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\tlet listObj = {\r\n\t\t\t\t\t\t\t\t\t\terpcode : el.erpcode,\r\n\t\t\t\t\t\t\t\t\t\tname : el.name,\r\n\t\t\t\t\t\t\t\t\t\tqty : el.qty,\r\n\t\t\t\t\t\t\t\t\t\tprice : el.price,\r\n\t\t\t\t\t\t\t\t\t\tstorage : el.storage\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\toldObj.list.push(listObj)\r\n\t\t\t\t\t\t\t\t\toldDataRule.push(oldObj)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t\t * 先去重，后合并\r\n\t\t\t\t\t\t\t\t * 1、源数据去重\r\n\t\t\t\t\t\t\t\t * 2、把去重后的数据和源数据中相同name的数据合并list\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t\tvar newData = []\r\n\t\t\t\t\t\t\t\tvar newObj = {}\r\n\t\t\t\t\t\t\t\toldDataRule.forEach((el, i) => {\r\n\t\t\t\t\t\t\t\t  if (!newObj[el.name]) {\r\n\t\t\t\t\t\t\t\t    newData.push(el);\r\n\t\t\t\t\t\t\t\t    newObj[el.name] = true;\r\n\t\t\t\t\t\t\t\t  } else {\r\n\t\t\t\t\t\t\t\t    newData.forEach(el => {\r\n\t\t\t\t\t\t\t\t      if (el.name === oldDataRule[i].name) {\r\n\t\t\t\t\t\t\t\t        el.list = el.list.concat(oldDataRule[i].list);\r\n\t\t\t\t\t\t\t\t      }\r\n\t\t\t\t\t\t\t\t    })\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t}) \r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis_.priview = newData.sort(this_.compare);\r\n\t\t\t\t\t\t\t\tfor(let k = 0; k < this_.priview.length; k++){\r\n\t\t\t\t\t\t\t\t\tthis_.$set(this_.priview[k], 'nums', 0);\r\n\t\t\t\t\t\t\t\t\tthis_.$set(this_.priview[k], 'money', 0);\r\n\t\t\t\t\t\t\t\t\tfor(let j = 0; j < this_.priview[k].list.length; j++){\r\n\t\t\t\t\t\t\t\t\t\tthis_.priview[k].nums = this_.priview[k].nums + parseInt(this_.priview[k].list[j].qty);\r\n\t\t\t\t\t\t\t\t\t\tthis_.priview[k].money = this_.priview[k].money + this_.priview[k].list[j].qty * this_.priview[k].list[j].price;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// console.log(\"-----------排序后----------------\");\r\n\t\t\t\t\t\t\t\t// console.log(this_.priview);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(this_.cartItem.length>0){\r\n\t\t\t\t\tthis_.isShow = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\ttitle:'请选择产品',\r\n\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//数组排序\r\n\t\t\tcompare(obj1,obj2){\r\n\t\t\t\tlet val1 = obj1.name;\r\n\t\t\t\tlet val2 = obj2.name;\r\n\t\t\t\tif (val1 < val2) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else if (val1 > val2) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}      \r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//”备注“弹层确认提交\r\n\t\t\tconfirmSub(){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tuni.showLoading();\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl:this_.$api.OrderNew,\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\"c_id\":this_.userInfo.c_id,\r\n\t\t\t\t\t\t\"c_openid\":this_.userInfo.c_openid,\r\n\t\t\t\t\t\t\"c_nickname\":this_.userInfo.c_nickname,\r\n\t\t\t\t\t\t\"c_ma001\":this_.userInfo.c_ma001,\r\n\t\t\t\t\t\t\"c_ma002\":this_.userInfo.c_ma002,\r\n\t\t\t\t\t\t\"c_tel\":this_.userInfo.c_tel,\r\n\t\t\t\t\t\t\"c_address\":this_.userInfo.c_address,\r\n\t\t\t\t\t\t\"note\":this_.note,\r\n\t\t\t\t\t\t\"storage\": this_.userInfo.storage,\r\n\t\t\t\t\t\t\"item\":this_.cartItem,\r\n\t\t\t\t\t\t\"m_id\":this_.userInfo.c_m_id\r\n\t\t\t\t\t},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tif(res.data.State){\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '订单提交成功！',\r\n\t\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl : '../myorder/myorder'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},1500);\r\n\t\t\t\t\t}\r\n\t\t\t\t},error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t\tthis_.isShow = false;\r\n\t\t\t},\r\n\t\t\t//查询\r\n\t\t\ttoSearch(){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tif(!this_.isClick){\r\n\t\t\t\t\tthis_.isSearch = true;\r\n\t\t\t\t\tthis_.isClick = true;\r\n\t\t\t\t\tthis_.getProduct();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//预定产品\r\n\t\t\tremind(item){\r\n\t\t\t\t//console.log(item);\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl : this_.$api.Remind,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata : {\r\n\t\t\t\t\t\tc_id : this_.userInfo.c_id,\r\n\t\t\t\t\t\tmb001: item.mb001,\r\n\t\t\t\t\t\tqty : item.s_qty,\r\n\t\t\t\t\t\tmc002 : item.mc002\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t// if(res.data.State){\r\n\t\t\t\t\t// \tuni.showToast({\r\n\t\t\t\t\t// \t\ticon : 'success',\r\n\t\t\t\t\t// \t\ttitle : '添加成功!',\r\n\t\t\t\t\t// \t\tduration:1500\r\n\t\t\t\t\t// \t})\r\n\t\t\t\t\t// }\r\n\t\t\t\t},error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\t\r\n\t}\r\n</script>\r\n<style scoped>\r\n.index-price{\r\n\tdisplay: inline-block;\r\n\tmargin-right:10rpx;\r\n}\r\n.tobuy-container{\r\n\tpadding-bottom:200rpx;\r\n}\r\n.custpro-cart{\r\n\twidth: auto;\r\n\tdisplay: flex;\r\n}\r\n.custpro-cont{\r\n\talign-items: baseline;\r\n}\r\n.custpro-list,.stock-item{\r\n\tflex-direction: column;\r\n}\r\n.stock-item{\r\n\tflex: 1;\r\n}\r\n.goods-info,.stock-info{\r\n\tdisplay: flex;\r\n}\r\n.stock-info{\r\n\talign-items: center;\r\n}\r\n.booking-btn{\r\n\tmargin-left: 30rpx;\r\n}\r\n.booking-btn button{\r\n\theight: 24px;\r\n\tline-height: 24px;\r\n\tpadding: 0 0.5em;\r\n\tfont-size: 12px;\r\n}\r\n.custpro-item{\r\n\tfont-size: 28rpx;\r\n\twidth: auto;\r\n}\r\n.detail-tr:first-child{\r\n\tbackground-color: #EEEEEE;\r\n}\r\n.detail-table{\r\n\tborder-left:1px solid #ddd;\r\n}\r\n.detail-td{\r\n\t-webkit-box-flex: inherit;\r\n\t-webkit-flex: inherit;\r\n\tflex: inherit;\r\n\twidth: 44%;\r\n\tfont-size: 24rpx;\r\n}\r\n.stock-name{\r\n\tdisplay: block;\r\n\tpadding: 10rpx 20rpx;\r\n\tbackground-color: #6dacf0;\r\n\tfont-weight: 700;\r\n}\r\n.login-dialog-cont{\r\n\ttop:10%;\r\n\tpadding: 5% 2%;\r\n\tbottom: 0;\r\n\tposition: relative;\r\n\theight: 80%;\r\n\tbackground-color: #FFFFFF;\r\n}\r\n.book-btn-group{\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tbackground: #fff;\r\n} \r\n.scroll-Y{\r\n\tmax-height: 620rpx;\r\n}\r\n.login-dialog-btn{\r\n\tmargin: 1% auto 3% auto;\r\n}\r\n</style>\r\n","import mod from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./tobuy.vue?vue&type=style&index=0&id=4120c9b2&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./tobuy.vue?vue&type=style&index=0&id=4120c9b2&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594713235040\n      var cssReload = require(\"D:/360极速浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}