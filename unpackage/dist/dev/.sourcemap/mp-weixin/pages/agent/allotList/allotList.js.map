{"version":3,"sources":["uni-app:///main.js","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/allotList/allotList.vue?ec01","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/allotList/allotList.vue?3acd","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/allotList/allotList.vue?4332","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/allotList/allotList.vue?ef4f","uni-app:///pages/agent/allotList/allotList.vue","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/allotList/allotList.vue?3a67","webpack:///E:/HBuilderProjects/MotorOrder/pages/agent/allotList/allotList.vue?363d"],"names":["createPage","Page"],"mappings":"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","file":"pages/agent/allotList/allotList.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/agent/allotList/allotList.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./allotList.vue?vue&type=template&id=724eebb8&\"\nvar renderjs\nimport script from \"./allotList.vue?vue&type=script&lang=js&\"\nexport * from \"./allotList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./allotList.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/HBuilderProjects/MotorOrder/pages/agent/allotList/allotList.vue\"\nexport default component.exports","export * from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allotList.vue?vue&type=template&id=724eebb8&\"","var components = {\n  uniSegmentedControl: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-segmented-control/uni-segmented-control\" */ \"@/components/uni-segmented-control/uni-segmented-control.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allotList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allotList.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"myorder_container f28\">\r\n\t\t<!-- tabItem -->\r\n\t\t<view class=\"am-fixedBar\" ref=\"tabitem\">\r\n\t\t\t<uni-segmented-control :current=\"tabIndex\" :values=\"tabItems\" :badge=\"badge\" @clickItem=\"onClickTab\" style-type=\"text\" active-color=\"#3079F3\"></uni-segmented-control>\r\n\t\t</view>\n\t\t<view :style=\"{marginTop:`${marginTop}px`}\">\n\t\t\t<view class=\"order-list-item ub-box-shadow\" v-for=\"(list,index) in allotList\">\n\t\t\t\t<view class=\"list-item ub ub-ac am-bg-active am-text-white order-uinn\">\r\n\t\t\t\t\t<view class=\"ub ub-f1\">订单号：{{list.a_code}}</view>\r\n\t\t\t\t</view>\n\t\t\t\t<view class=\"order-uinn\">\r\n\t\t\t\t\t<view class=\"list-item umar-b\"><text class=\"am-text-99\">修理厂名称：</text>{{list.m_name}}</view>\r\n\t\t\t\t\t<view class=\"list-item umar-b\"><text class=\"am-text-99\">收货地址：</text>{{list.m_prov + ' ' + list.m_city + ' ' + list.m_address}}</view>\r\n\t\t\t\t\t<view style=\"margin-top: 8rpx;\">\r\n\t\t\t\t\t\t<view class=\"detail-table\">\r\n\t\t\t\t\t\t\t<view class=\"detail-tr no-ubb\" v-if=\"list.item.length>0\">\r\n\t\t\t\t\t\t\t\t<view class=\"detail-td\">商品名称</view>\r\n\t\t\t\t\t\t\t\t<view class=\"detail-td codenum\">发动机号</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"detail-tr ub-ac\" v-for=\"(items,index02) in list.item\">\r\n\t\t\t\t\t\t\t\t<view class=\"detail-td\">{{items.i_ma003}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"detail-td codenum\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"ub ub-ac\" @click=\"delCode(items,index02,list)\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"ub umar-rs\">{{items.i_code}}</view>\r\n\t\t\t\t\t\t\t\t\t\t<image src=\"../../../static/images/del.png\" class=\"ub icon-del\" v-if=\"tabIndex == 0\"></image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t \t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"ub am-btn-panel ub-ac\">\r\n\t\t\t\t\t\t<view class=\"ub ub-f1 ub-pe\" v-if=\"tabIndex == 0\">\r\n\t\t\t\t\t\t\t<view class=\"ub umar-r\">\r\n\t\t\t\t\t\t\t\t<button class=\"f24 am-btn-danger\" @click=\"scanOut(list)\">扫描出库</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"ub umar-r\">\r\n\t\t\t\t\t\t\t\t<button class=\"f24 am-btn-primary\" @click=\"orderOk(list,index)\">确认发货</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"ub\">\r\n\t\t\t\t\t\t\t\t<button class=\"f24\" @click=\"delAllot(list,index)\">删除</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"ub ub-f1 ub-pe\" v-if=\"tabIndex == 1\">\r\n\t\t\t\t\t\t\t<view class=\"ub\">\r\n\t\t\t\t\t\t\t\t<button class=\"f24 am-btn-danger\" @click=\"cancelAllot(list,index)\">取消订单</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport wx from '@/common/js/jwweixin.js'\r\n\timport uniSegmentedControl from \"@/components/uni-segmented-control/uni-segmented-control.vue\"\r\n\timport uniLoadMore from '@/components/uni-load-more/uni-load-more.vue'\r\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tuniSegmentedControl,\r\n\t\t\tuniLoadMore\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuserInfo: {}, //用户信息\r\n\t\t\t\tallotList: [], //订单列表\n\t\t\t\tpageSize:10,\n\t\t\t\tpageCount: '',\r\n\t\t\t\tp:1,\r\n\t\t\t\ttotal : 0,\r\n\t\t\t\tstatus:'more',\r\n\t\t\t\tstate : [1,2,3,-1],//出库中/已发货/确认收货/已取消\r\n\t\t\t\ttabItems: ['出库中','已发货','确认收货','已取消'],\r\n\t\t\t\tbadge:[0,0,0,0],\r\n\t\t\t\ttabIndex: 0,\r\n\t\t\t\tmarginTop: '',\r\n\t\t\t\ttimer:null,\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\n\t\t\t//读取存储数据\r\n\t\t\tlet this_ = this;\r\n\t\t\tthis_.wxInit();\r\n\t\t\tuni.getStorage({\r\n\t\t\t\tkey: 'userInfo',\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tthis_.userInfo = res.data[0];\r\n\t\t\t\t\tthis_.getAllotList();\r\n\t\t\t\t\tthis_.getAllotQty();//获取tab不同状态数量\r\n\t\t\t\t\t//每隔5秒刷新\r\n\t\t\t\t\tthis_.timer = setInterval(function() {\r\n\t\t\t\t\t\tthis_.getAllotQty();//获取数字\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tonUnload(){\r\n\t\t\tlet this_ = this;\r\n\t\t\tif(this_.timer){\r\n\t\t\t\tclearInterval(this_.timer);  \r\n\t\t\t\tthis_.timer = null; \r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.marginTop = this.$refs.tabitem.$el.getBoundingClientRect().height;\r\n\t\t},\r\n\t\t//上拉加载\r\n\t\tonReachBottom (){\r\n\t\t\tif(this.p < this.pageCount){\r\n\t\t\t\tthis.p++;\r\n\t\t\t\tthis.status = 'loading';\r\n\t\t\t\tthis.getAllotList();\r\n\t\t\t}else{\r\n\t\t\t\tthis.status = 'noMore';\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//tab切换\r\n\t\t\tonClickTab(e){ \r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tif (this_.tabIndex !== e.currentIndex) {\r\n\t\t\t\t\tthis_.p = 1;\r\n\t\t\t\t\tthis_.tabIndex = e.currentIndex;\r\n\t\t\t\t\tthis_.getAllotList();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//微信\r\n\t\t\twxInit() {\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tlet _data = {\r\n\t\t\t\t\turl: 'http://tiangang.htqp.com.cn:2345/',\r\n\t\t\t\t};\r\n\t\t\t\t// 获取微信签名\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl: 'JsSdkUiPackage',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: _data,\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\tthis_.wxConfig(res.data.Timestamp, res.data.NonceStr, res.data.Signature, res.data.AppId);\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\twxConfig(_timestamp, _nonceStr, _signature, _appId) {\r\n\t\t\t\twx.config({\r\n\t\t\t\t\tdebug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n\t\t\t\t\tappId: _appId, // 必填，公众号的唯一标识\r\n\t\t\t\t\ttimestamp: _timestamp, // 必填，生成签名的时间戳\r\n\t\t\t\t\tnonceStr: _nonceStr, // 必填，生成签名的随机串\r\n\t\t\t\t\tsignature: _signature, // 必填，签名，见附录1\r\n\t\t\t\t\tjsApiList: ['scanQRCode']\r\n\t\t\t\t\t// 必填，需要使用的JS接口列表，所有JS接口列表见附录2\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//查询调拨单列表\r\n\t\t\tgetAllotList() {\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl: this_.$api.GetAllocate + '?c_ma001=' + this_.userInfo.c_ma001 + '&m_id=&state=' + this_.state[this_.tabIndex] + '&pageindex='+this_.p+'&pagesize='+this_.pageSize,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: {},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\tthis_.allotList = res.data.rows;\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//调拨---扫码出库\r\n\t\t\tscanOut(list) {\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\t//let engineCode = 'A0890329191193';\r\n\t\t\t\twx.ready(function() {\r\n\t\t\t\t\twx.scanQRCode({\r\n\t\t\t\t\t\tneedResult: 1,\r\n\t\t\t\t\t\tscanType: [\"qrCode\", \"barCode\"],\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tlet urlName = res.resultStr;\r\n\t\t\t\t\t\t\tlet engineCode = urlName.split(\"?\")[1].split(\"=\")[1];\r\n\t\t\t\t\t\t\tfor(let i=0;i<list.item.length;i++){\r\n\t\t\t\t\t\t\t\tif(list.item[i].i_code == engineCode){\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ticon : 'none',\r\n\t\t\t\t\t\t\t\t\t\ttitle : '该发动机号已扫描',\r\n\t\t\t\t\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuni.showLoading();\r\n\t\t\t\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\t\t\t\turl:this_.$api.AddAllocate + '?a_id=' + list.a_id,\r\n\t\t\t\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\t\t\t\tdata:{code:engineCode},\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t//请求成功\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon : 'none',\r\n\t\t\t\t\t\t\t\t\ttitle : res.data.Message,\r\n\t\t\t\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif(res.data.State){\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\tthis_.allotDetail(list);\r\n\t\t\t\t\t\t\t\t\t},1500);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},error => {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\talert(\"扫描出库失败\");\r\n\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(res) {\r\n\t\t\t\t\t\t\talert(\"失败：\"+JSON.stringify(res));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//刷新已绑定识别码api/AddAllocate?a_id=\r\n\t\t\tallotDetail(list){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl:this_.$api.AddAllocate + '?a_id=' + list.a_id,\r\n\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\tdata:{},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tlist.item = res.data;\r\n\t\t\t\t},error => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\talert(\"扫描出库失败\");\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//删除发动机号\r\n\t\t\tdelCode(item,index,list){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tif(this_.tabIndex == 0){\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\tcontent: '确定要删除该发动机号吗？',\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.showLoading();\r\n\t\t\t\t\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\t\t\t\t\turl: this_.$api.MotorClear + '?a_id=' + list.a_id,\r\n\t\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\ti_code:item.i_code\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tif(res.data.State){\r\n\t\t\t\t\t\t\t\t\t\tlist.item.splice(index,1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ticon : 'none',\r\n\t\t\t\t\t\t\t\t\t\ttitle : res.data.Message,\r\n\t\t\t\t\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, error => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\t//console.log('用户点击取消');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//确认发货\r\n\t\t\torderOk(list,index) {\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tif(list.item.length>0){\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\tcontent: '是否确认发货？',\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tthis_.confirmAllot(list.a_m_id,list.a_id,index);\r\n\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\t//console.log('用户点击取消');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon : 'none',\r\n\t\t\t\t\t\ttitle : \"未扫描绑定发动机识别码,请先扫描出库\",\r\n\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//确认发货接口\r\n\t\t\tconfirmAllot(mId,aId,index){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tuni.showLoading();\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl: this_.$api.AllocateSend,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tc_ma001: this_.userInfo.c_ma001,\r\n\t\t\t\t\t\tc_ma002: this_.userInfo.c_ma002,\r\n\t\t\t\t\t\tc_tel: this_.userInfo.c_tel,\r\n\t\t\t\t\t\tc_nickname: this_.userInfo.c_nickname,\r\n\t\t\t\t\t\tm_id: mId,\r\n\t\t\t\t\t\ta_id: aId,\r\n\t\t\t\t\t},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tif(res.data.State){\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tthis_.allotList.splice(index,1);\r\n\t\t\t\t\t\t},1500);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon : 'none',\r\n\t\t\t\t\t\ttitle : res.data.Message,\r\n\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//删除调拨单\r\n\t\t\tdelAllot(list,index){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl: this_.$api.DelAllocate ,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\"a_id\":list.a_id,\r\n\t\t\t\t\t},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\tif(res.data.State){\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon : 'none',\r\n\t\t\t\t\t\t\ttitle : \"删除成功！\",\r\n\t\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tthis_.allotList.splice(index,1);//删除\r\n\t\t\t\t\t\t},1500);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//取消调拨单\r\n\t\t\tcancelAllot(list,index){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl: this_.$api.DelAllocate + '?a_id=' + list.a_id,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\"c_ma002\":this_.userInfo.c_ma002,\r\n\t\t\t\t\t\t\"c_nickname\":this_.userInfo.c_nickname\r\n\t\t\t\t\t},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//请求成功\r\n\t\t\t\t\tif(res.data.State){\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon : 'none',\r\n\t\t\t\t\t\t\ttitle : \"取消成功！\",\r\n\t\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tthis_.allotList.splice(index,1);\r\n\t\t\t\t\t\t},1500);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//获取总页数\r\n\t\t\tpapeTotal(rowCount){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tif(rowCount != null && rowCount != \"\"){\r\n\t\t\t\t\tif(rowCount % this_.pageSize == 0){\r\n\t\t\t\t\t\tthis_.pageCount = parseInt(rowCount / this_.pageSize);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis_.pageCount = parseInt(rowCount / this_.pageSize) + 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//获取tab状态数量\r\n\t\t\tgetAllotQty(){\r\n\t\t\t\tlet this_ = this;\r\n\t\t\t\tthis_.$http.httpTokenRequest({\r\n\t\t\t\t\turl:this_.$api.GetAllocate+'?c_ma001='+ this_.userInfo.c_ma001 +'&m_id=' + this_.userInfo.c_m_id,\r\n\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\tdata:{},\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tfor(let i=0;i<res.data.length;i++){\r\n\t\t\t\t\t\tif(res.data[i].a_state_no == 1){\r\n\t\t\t\t\t\t\tthis_.badge[0] = res.data[i].qty;\r\n\t\t\t\t\t\t}else if(res.data[i].a_state_no == 2){\r\n\t\t\t\t\t\t\tthis_.badge[1] = res.data[i].qty;\r\n\t\t\t\t\t\t}else if(res.data[i].a_state_no == 3){\r\n\t\t\t\t\t\t\tthis_.badge[2] = res.data[i].qty;\r\n\t\t\t\t\t\t}else if(res.data[i].a_state_no == -1){\r\n\t\t\t\t\t\t\tthis_.badge[3] = res.data[i].qty;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis_.$set(this_.badge,true);\r\n\t\t\t\t\t\r\n\t\t\t\t},error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\n\t.umar-r{margin-right: 20rpx;}\n\t.detail-tr:first-child{\n\t\tbackground-color: #EEEEEE;\n\t}\r\n\t.detail-table{\r\n\t\tborder-left:1px solid #ddd;\r\n\t}\n\t.detail-td{\n\t\t-webkit-box-flex: inherit;\n\t\t-webkit-flex: inherit;\n\t\tflex: inherit;\n\t\twidth: 25%;\n\t\tfont-size: 24rpx;\n\t}\n\t.number{\n\t\twidth: 12%;\n\t}\r\n\t.price{\r\n\t\twidth: 22%;\r\n\t}\n\t.codenum{\n\t\twidth: 41%;\n\t}\n\t.td-br{\n\t\tword-break: break-all;\n\t}\r\n\t.icon-del{\r\n\t\twidth: 35rpx;\r\n\t\theight: 35rpx;\r\n\t}\r\n\t.umar-rs{\r\n\t\tmargin-right: 8rpx;\r\n\t}\n</style>\n","import mod from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allotList.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360极速浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allotList.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594713235045\n      var cssReload = require(\"D:/360极速浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}