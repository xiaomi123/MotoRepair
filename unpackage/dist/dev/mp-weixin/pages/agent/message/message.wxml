<view><view class="content"><scroll-view class="msg-list" scroll-y="true" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" upper-threshold="50" data-event-opts="{{[['scrolltoupper',[['loadHistory',['$event']]]]]}}" bindscrolltoupper="__e"><block wx:if="{{!scrollAnimation}}"><view class="loading"><view class="spinner"><view class="rect1"></view><view class="rect2"></view><view class="rect3"></view><view class="rect4"></view><view class="rect5"></view></view></view></block><block wx:for="{{msgList}}" wx:for-item="row" wx:for-index="__i0__"><view class="row"><block wx:if="{{row.m_isreply==1}}"><view class="my"><view class="left" style="flex-direction:column;align-items:flex-end;"><view class="f28">{{row.expr1}}</view><view class="f28" style="color:#808080;">{{row.m_create_date}}</view><view class="bubble"><block wx:if="{{row.m_type=='text'}}"><rich-text nodes="{{row.m_message}}"></rich-text></block><block wx:else><block wx:if="{{row.m_type=='image'}}"><image class="message_img" src="{{row.m_message}}" mode="widthFix"></image></block></block></view></view><view class="right"><block wx:if="{{row.c_headimgurl!=null}}"><image src="{{row.c_headimgurl}}"></image></block><block wx:else><image src="/static/images/service.png"></image></block></view></view></block><block wx:if="{{row.m_isreply==0}}"><view class="other"><view class="left"><image src="{{row.c_headimgurl}}"></image></view><view class="right" style="flex-direction:column;align-items:flex-start;"><view class="f28">{{row.expr1}}</view><view class="f28" style="color:#808080;">{{row.m_create_date}}</view><view class="bubble"><block wx:if="{{row.m_type=='text'}}"><rich-text nodes="{{row.m_message}}"></rich-text></block><block wx:else><block wx:if="{{row.m_type=='image'}}"><image class="message_img" src="{{row.m_message}}" mode="widthFix"></image></block></block></view></view></view></block></view></block></scroll-view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="input-box" catchtouchmove="__e"><view class="textbox"><view class="text-mode"><view class="box"><textarea auto-height="true" disabled="{{disabled}}" data-event-opts="{{[['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindinput="__e"></textarea></view></view></view><view data-event-opts="{{[['tap',[['sendText',['$event']]]]]}}" class="send" bindtap="__e"><view class="btn">发送</view></view></view></view>